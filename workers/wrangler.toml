name = "jetfinder-api"
main = "src/index.ts"
compatibility_date = "2024-11-15"
compatibility_flags = ["nodejs_compat"]

[vars]
ENVIRONMENT = "production"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "jetfinder-db"
database_id = "" # Set after creating DB: wrangler d1 create jetfinder-db
migrations_dir = "./migrations"

# R2 Bucket for images
[[r2_buckets]]
binding = "IMAGES"
bucket_name = "jetfinder-images"
preview_bucket_name = "jetfinder-images-preview"

# R2 Bucket for videos
[[r2_buckets]]
binding = "VIDEOS"
bucket_name = "jetfinder-videos"
preview_bucket_name = "jetfinder-videos-preview"

# KV for caching and session storage
[[kv_namespaces]]
binding = "CACHE"
id = "" # Set after creating KV: wrangler kv:namespace create "CACHE"
preview_id = "" # Set after: wrangler kv:namespace create "CACHE" --preview

[env.development]
vars = { ENVIRONMENT = "development" }
[[env.development.d1_databases]]
binding = "DB"
database_name = "jetfinder-db"
database_id = ""
preview_database_id = "" # Auto-generated for local dev

[[env.development.r2_buckets]]
binding = "IMAGES"
bucket_name = "jetfinder-images-preview"

[[env.development.r2_buckets]]
binding = "VIDEOS"
bucket_name = "jetfinder-videos-preview"

[env.development.kv_namespaces]
binding = "CACHE"
id = ""
preview_id = ""

# Limits (adjust based on plan)
[limits]
cpu_ms = 50

