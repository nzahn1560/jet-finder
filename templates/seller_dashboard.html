<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seller Dashboard - Jet Finder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        .listing-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .listing-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .integration-card {
            border: 2px dashed #dee2e6;
            transition: all 0.3s;
        }

        .integration-card:hover {
            border-color: #0d6efd;
            background-color: rgba(13, 110, 253, 0.05);
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-active {
            background-color: #198754;
        }

        .status-pending {
            background-color: #ffc107;
        }

        .status-inactive {
            background-color: #6c757d;
        }

        .metric-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="bi bi-airplane"></i> Jet Finder
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/buy-aircraft">Buy Aircraft</a>
                <a class="nav-link" href="/services-parts">Services & Parts</a>
                <a class="nav-link" href="/charter">Charter</a>
                <a class="nav-link" href="/stock-market">Stock Market</a>
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        Seller Tools
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item active" href="/seller-dashboard">Dashboard</a></li>
                        <li><a class="dropdown-item" href="/create-listing">Create Listing</a></li>
                        <li><a class="dropdown-item" href="/my-listings">My Listings</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="/integrations">Integrations</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid py-4" x-data="sellerDashboard()">
        <!-- Dashboard Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h2>Seller Dashboard</h2>
                        <p class="text-muted mb-0">Manage your aircraft listings and integrations</p>
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-outline-primary" @click="syncIntegrations()">
                            <i class="bi bi-arrow-clockwise"></i> Sync Data
                        </button>
                        <button class="btn btn-primary" @click="createNewListing()">
                            <i class="bi bi-plus"></i> New Listing
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Key Metrics -->
        <div class="row mb-4">
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card metric-card">
                    <div class="card-body text-center">
                        <i class="bi bi-airplane display-6 text-primary mb-2"></i>
                        <h3 x-text="metrics.totalListings"></h3>
                        <p class="text-muted mb-0">Active Listings</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card metric-card">
                    <div class="card-body text-center">
                        <i class="bi bi-eye display-6 text-success mb-2"></i>
                        <h3 x-text="metrics.totalViews"></h3>
                        <p class="text-muted mb-0">Total Views</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card metric-card">
                    <div class="card-body text-center">
                        <i class="bi bi-envelope display-6 text-warning mb-2"></i>
                        <h3 x-text="metrics.totalInquiries"></h3>
                        <p class="text-muted mb-0">Inquiries</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card metric-card">
                    <div class="card-body text-center">
                        <i class="bi bi-currency-dollar display-6 text-info mb-2"></i>
                        <h3 x-text="formatPrice(metrics.totalValue)"></h3>
                        <p class="text-muted mb-0">Portfolio Value</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Tabs -->
        <ul class="nav nav-tabs mb-4">
            <li class="nav-item">
                <button class="nav-link" :class="activeTab === 'listings' ? 'active' : ''"
                    @click="setActiveTab('listings')">
                    <i class="bi bi-list"></i> My Listings
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" :class="activeTab === 'integrations' ? 'active' : ''"
                    @click="setActiveTab('integrations')">
                    <i class="bi bi-link-45deg"></i> Integrations
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" :class="activeTab === 'analytics' ? 'active' : ''"
                    @click="setActiveTab('analytics')">
                    <i class="bi bi-graph-up"></i> Analytics
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" :class="activeTab === 'tools' ? 'active' : ''" @click="setActiveTab('tools')">
                    <i class="bi bi-tools"></i> Seller Tools
                </button>
            </li>
        </ul>

        <!-- Listings Tab -->
        <div x-show="activeTab === 'listings'" x-transition>
            <div class="row">
                <div class="col-lg-8">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4>Active Listings</h4>
                        <div class="d-flex gap-2">
                            <select class="form-select form-select-sm" x-model="listingFilter"
                                @change="filterListings()">
                                <option value="all">All Listings</option>
                                <option value="active">Active</option>
                                <option value="pending">Pending Approval</option>
                                <option value="expired">Expired</option>
                            </select>
                            <button class="btn btn-primary btn-sm" @click="bulkEdit()">
                                <i class="bi bi-pencil"></i> Bulk Edit
                            </button>
                        </div>
                    </div>

                    <div class="row">
                        <template x-for="listing in filteredListings" :key="listing.id">
                            <div class="col-lg-6 mb-4">
                                <div class="card listing-card">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-start mb-3">
                                            <h6 x-text="listing.manufacturer + ' ' + listing.model"></h6>
                                            <div class="d-flex align-items-center gap-2">
                                                <span class="status-indicator"
                                                    :class="'status-' + listing.status"></span>
                                                <span class="badge" :class="getStatusBadge(listing.status)"
                                                    x-text="listing.status"></span>
                                            </div>
                                        </div>

                                        <div class="row mb-3">
                                            <div class="col-6">
                                                <small class="text-muted">Price</small>
                                                <div x-text="formatPrice(listing.price)"></div>
                                            </div>
                                            <div class="col-6">
                                                <small class="text-muted">Views</small>
                                                <div x-text="listing.views + ' views'"></div>
                                            </div>
                                        </div>

                                        <div class="row mb-3">
                                            <div class="col-6">
                                                <small class="text-muted">Inquiries</small>
                                                <div x-text="listing.inquiries + ' inquiries'"></div>
                                            </div>
                                            <div class="col-6">
                                                <small class="text-muted">Days Listed</small>
                                                <div x-text="listing.daysListed + ' days'"></div>
                                            </div>
                                        </div>

                                        <div class="d-flex gap-2">
                                            <button class="btn btn-primary btn-sm" @click="editListing(listing)">
                                                <i class="bi bi-pencil"></i> Edit
                                            </button>
                                            <button class="btn btn-outline-primary btn-sm"
                                                @click="viewAnalytics(listing)">
                                                <i class="bi bi-graph-up"></i> Analytics
                                            </button>
                                            <button class="btn btn-outline-success btn-sm"
                                                @click="promoteListingModal(listing)">
                                                <i class="bi bi-megaphone"></i> Promote
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-header">
                            <h5>Quick Actions</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" @click="createNewListing()">
                                    <i class="bi bi-plus"></i> Create New Listing
                                </button>
                                <button class="btn btn-outline-primary" @click="importFromAvinode()">
                                    <i class="bi bi-cloud-download"></i> Import from Avinode
                                </button>
                                <button class="btn btn-outline-primary" @click="updateFromJetNet()">
                                    <i class="bi bi-arrow-clockwise"></i> Update from JetNet
                                </button>
                                <button class="btn btn-outline-success" @click="exportListings()">
                                    <i class="bi bi-download"></i> Export Listings
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-3">
                        <div class="card-header">
                            <h5>Recent Activity</h5>
                        </div>
                        <div class="card-body">
                            <template x-for="activity in recentActivity" :key="activity.id">
                                <div class="d-flex align-items-start mb-3">
                                    <i :class="'bi bi-' + activity.icon + ' text-' + activity.type + ' me-2 mt-1'"></i>
                                    <div class="flex-grow-1">
                                        <div class="fw-bold" x-text="activity.title"></div>
                                        <small class="text-muted" x-text="activity.description"></small>
                                        <div class="small text-muted" x-text="activity.time"></div>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Integrations Tab -->
        <div x-show="activeTab === 'integrations'" x-transition>
            <div class="row">
                <div class="col-lg-8">
                    <h4 class="mb-4">Connected Integrations</h4>

                    <div class="row">
                        <template x-for="integration in integrations" :key="integration.id">
                            <div class="col-md-6 mb-4">
                                <div class="card integration-card"
                                    :class="integration.connected ? '' : 'border-warning'">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-start mb-3">
                                            <div class="d-flex align-items-center">
                                                <img :src="integration.logo" class="me-3"
                                                    style="width: 40px; height: 40px;">
                                                <div>
                                                    <h6 class="mb-0" x-text="integration.name"></h6>
                                                    <small class="text-muted" x-text="integration.description"></small>
                                                </div>
                                            </div>
                                            <span class="badge"
                                                :class="integration.connected ? 'bg-success' : 'bg-warning'"
                                                x-text="integration.connected ? 'Connected' : 'Not Connected'"></span>
                                        </div>

                                        <div class="mb-3" x-show="integration.connected">
                                            <div class="row text-center">
                                                <div class="col-4">
                                                    <div class="h6 mb-0" x-text="integration.stats?.listings || 0">
                                                    </div>
                                                    <small class="text-muted">Listings</small>
                                                </div>
                                                <div class="col-4">
                                                    <div class="h6 mb-0" x-text="integration.stats?.synced || 0"></div>
                                                    <small class="text-muted">Synced</small>
                                                </div>
                                                <div class="col-4">
                                                    <div class="h6 mb-0"
                                                        x-text="integration.stats?.lastSync || 'Never'"></div>
                                                    <small class="text-muted">Last Sync</small>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="d-flex gap-2">
                                            <button class="btn btn-primary btn-sm"
                                                @click="integration.connected ? syncIntegration(integration) : connectIntegration(integration)"
                                                x-text="integration.connected ? 'Sync Now' : 'Connect'"></button>
                                            <button class="btn btn-outline-primary btn-sm"
                                                @click="configureIntegration(integration)"
                                                x-show="integration.connected">
                                                <i class="bi bi-gear"></i> Configure
                                            </button>
                                            <button class="btn btn-outline-danger btn-sm"
                                                @click="disconnectIntegration(integration)"
                                                x-show="integration.connected">
                                                <i class="bi bi-x"></i> Disconnect
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-header">
                            <h5>Integration Benefits</h5>
                        </div>
                        <div class="card-body">
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <i class="bi bi-check-circle text-success me-2"></i>
                                    Auto-import aircraft specifications
                                </li>
                                <li class="mb-2">
                                    <i class="bi bi-check-circle text-success me-2"></i>
                                    Real-time pricing updates
                                </li>
                                <li class="mb-2">
                                    <i class="bi bi-check-circle text-success me-2"></i>
                                    Maintenance record sync
                                </li>
                                <li class="mb-2">
                                    <i class="bi bi-check-circle text-success me-2"></i>
                                    Multi-platform publishing
                                </li>
                                <li class="mb-2">
                                    <i class="bi bi-check-circle text-success me-2"></i>
                                    Automated photo downloads
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="card mt-3">
                        <div class="card-header">
                            <h5>Sync Settings</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" x-model="syncSettings.autoSync">
                                <label class="form-check-label">Auto-sync every hour</label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" x-model="syncSettings.priceUpdates">
                                <label class="form-check-label">Auto-update prices</label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" x-model="syncSettings.photoSync">
                                <label class="form-check-label">Sync new photos</label>
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" x-model="syncSettings.notifications">
                                <label class="form-check-label">Email notifications</label>
                            </div>
                            <button class="btn btn-primary btn-sm w-100" @click="saveSyncSettings()">
                                Save Settings
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div x-show="activeTab === 'analytics'" x-transition>
            <div class="row">
                <div class="col-lg-8">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>Listing Performance</h5>
                        </div>
                        <div class="card-body">
                            <canvas id="performanceChart" width="400" height="200"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h5>Market Comparison</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Aircraft</th>
                                            <th>Your Price</th>
                                            <th>Market Average</th>
                                            <th>Position</th>
                                            <th>Recommendation</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <template x-for="comparison in marketComparisons" :key="comparison.id">
                                            <tr>
                                                <td x-text="comparison.aircraft"></td>
                                                <td x-text="formatPrice(comparison.yourPrice)"></td>
                                                <td x-text="formatPrice(comparison.marketAvg)"></td>
                                                <td>
                                                    <span class="badge" :class="getPositionBadge(comparison.position)"
                                                        x-text="comparison.position"></span>
                                                </td>
                                                <td>
                                                    <small x-text="comparison.recommendation"></small>
                                                </td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="card mb-3">
                        <div class="card-header">
                            <h5>Performance Summary</h5>
                        </div>
                        <div class="card-body">
                            <div class="row text-center">
                                <div class="col-6 mb-3">
                                    <div class="h4 text-success" x-text="analytics.avgViews"></div>
                                    <small class="text-muted">Avg Views/Day</small>
                                </div>
                                <div class="col-6 mb-3">
                                    <div class="h4 text-info" x-text="analytics.conversionRate + '%'"></div>
                                    <small class="text-muted">Inquiry Rate</small>
                                </div>
                                <div class="col-6 mb-3">
                                    <div class="h4 text-warning" x-text="analytics.avgDaysListed"></div>
                                    <small class="text-muted">Avg Days Listed</small>
                                </div>
                                <div class="col-6 mb-3">
                                    <div class="h4 text-primary" x-text="analytics.qualityScore"></div>
                                    <small class="text-muted">Quality Score</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h5>Optimization Tips</h5>
                        </div>
                        <div class="card-body">
                            <template x-for="tip in optimizationTips" :key="tip.id">
                                <div class="alert" :class="'alert-' + tip.type + ' py-2'" role="alert">
                                    <div class="fw-bold" x-text="tip.title"></div>
                                    <small x-text="tip.description"></small>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tools Tab -->
        <div x-show="activeTab === 'tools'" x-transition>
            <div class="row">
                <div class="col-lg-8">
                    <h4 class="mb-4">Seller Tools</h4>

                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="bi bi-search text-primary"></i> Aircraft Lookup</h5>
                                    <p class="text-muted">Search JetNet for aircraft specifications and history</p>
                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control" placeholder="Enter N-Number or Serial"
                                            x-model="lookupQuery">
                                        <button class="btn btn-primary" @click="lookupAircraft()">
                                            <i class="bi bi-search"></i> Lookup
                                        </button>
                                    </div>
                                    <div x-show="lookupResult" class="alert alert-info">
                                        <div class="fw-bold" x-text="lookupResult?.aircraft"></div>
                                        <div x-text="lookupResult?.details"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6 mb-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="bi bi-calculator text-success"></i> Pricing Calculator</h5>
                                    <p class="text-muted">Get market-based pricing recommendations</p>
                                    <div class="mb-3">
                                        <select class="form-select" x-model="pricingAircraft">
                                            <option value="">Select Aircraft</option>
                                            <option value="citation-cj3">Citation CJ3+</option>
                                            <option value="g650">Gulfstream G650</option>
                                            <option value="global-7500">Global 7500</option>
                                        </select>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-6">
                                            <input type="number" class="form-control" placeholder="Year"
                                                x-model="pricingYear">
                                        </div>
                                        <div class="col-6">
                                            <input type="number" class="form-control" placeholder="Total Time"
                                                x-model="pricingTime">
                                        </div>
                                    </div>
                                    <button class="btn btn-success w-100" @click="calculatePricing()">
                                        <i class="bi bi-calculator"></i> Calculate Price
                                    </button>
                                    <div x-show="pricingResult" class="alert alert-success mt-3">
                                        <div class="fw-bold">Recommended Price: <span
                                                x-text="formatPrice(pricingResult)"></span></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6 mb-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="bi bi-camera text-warning"></i> Photo Optimizer</h5>
                                    <p class="text-muted">Optimize and enhance your aircraft photos</p>
                                    <div class="mb-3">
                                        <input type="file" class="form-control" multiple accept="image/*"
                                            @change="handlePhotoUpload($event)">
                                    </div>
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-warning" @click="optimizePhotos()">
                                            <i class="bi bi-magic"></i> Optimize Photos
                                        </button>
                                        <button class="btn btn-outline-warning" @click="generateVirtualTour()">
                                            <i class="bi bi-camera-video"></i> Generate Virtual Tour
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6 mb-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="bi bi-file-earmark-text text-info"></i> Document Generator</h5>
                                    <p class="text-muted">Generate professional sales documents</p>
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-info" @click="generateBrochure()">
                                            <i class="bi bi-file-pdf"></i> Sales Brochure
                                        </button>
                                        <button class="btn btn-outline-info" @click="generateSpecSheet()">
                                            <i class="bi bi-file-spreadsheet"></i> Spec Sheet
                                        </button>
                                        <button class="btn btn-outline-info" @click="generateReport()">
                                            <i class="bi bi-file-text"></i> Market Report
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-header">
                            <h5>Tool Usage</h5>
                        </div>
                        <div class="card-body">
                            <template x-for="usage in toolUsage" :key="usage.tool">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span x-text="usage.tool"></span>
                                    <span class="badge bg-primary" x-text="usage.count + ' uses'"></span>
                                </div>
                            </template>
                        </div>
                    </div>

                    <div class="card mt-3">
                        <div class="card-header">
                            <h5>Pro Tips</h5>
                        </div>
                        <div class="card-body">
                            <template x-for="tip in proTips" :key="tip.id">
                                <div class="alert alert-light py-2" role="alert">
                                    <div class="fw-bold" x-text="tip.title"></div>
                                    <small x-text="tip.description"></small>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Connect Integration Modal -->
    <div class="modal fade" id="connectModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" x-text="'Connect to ' + (selectedIntegration?.name || 'Service')"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form @submit.prevent="submitIntegrationConnection()">
                        <div class="mb-3">
                            <label class="form-label">API Key / Username</label>
                            <input type="text" class="form-control" x-model="connectionForm.credentials" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password / Secret (if required)</label>
                            <input type="password" class="form-control" x-model="connectionForm.secret">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Server URL (if required)</label>
                            <input type="url" class="form-control" x-model="connectionForm.serverUrl">
                        </div>
                        <div class="alert alert-info">
                            <small>Your credentials are encrypted and stored securely. We only use them to sync your
                                data.</small>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">Connect</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function sellerDashboard() {
            return {
                activeTab: 'listings',
                listingFilter: 'all',

                metrics: {
                    totalListings: 5,
                    totalViews: 2847,
                    totalInquiries: 23,
                    totalValue: 45600000
                },

                listings: [
                    {
                        id: 1,
                        manufacturer: 'Cessna',
                        model: 'Citation CJ3+',
                        price: 8500000,
                        status: 'active',
                        views: 247,
                        inquiries: 8,
                        daysListed: 15
                    },
                    {
                        id: 2,
                        manufacturer: 'Gulfstream',
                        model: 'G650',
                        price: 65000000,
                        status: 'pending',
                        views: 156,
                        inquiries: 12,
                        daysListed: 3
                    }
                ],

                filteredListings: [],

                integrations: [
                    {
                        id: 1,
                        name: 'Avinode',
                        description: 'Charter marketplace integration',
                        logo: '/static/images/avinode-logo.png',
                        connected: true,
                        stats: { listings: 3, synced: 2, lastSync: '2h ago' }
                    },
                    {
                        id: 2,
                        name: 'JetNet',
                        description: 'Aircraft database and valuations',
                        logo: '/static/images/jetnet-logo.png',
                        connected: true,
                        stats: { listings: 5, synced: 5, lastSync: '1h ago' }
                    },
                    {
                        id: 3,
                        name: 'Controller.com',
                        description: 'Aircraft listing platform',
                        logo: '/static/images/controller-logo.png',
                        connected: false
                    },
                    {
                        id: 4,
                        name: 'Trade-A-Plane',
                        description: 'Aviation marketplace',
                        logo: '/static/images/tap-logo.png',
                        connected: false
                    }
                ],

                syncSettings: {
                    autoSync: true,
                    priceUpdates: true,
                    photoSync: false,
                    notifications: true
                },

                recentActivity: [
                    {
                        id: 1,
                        icon: 'eye',
                        type: 'info',
                        title: 'New inquiry received',
                        description: 'Citation CJ3+ inquiry from John Smith',
                        time: '2 hours ago'
                    },
                    {
                        id: 2,
                        icon: 'arrow-clockwise',
                        type: 'success',
                        title: 'Listings synced',
                        description: 'Successfully synced with JetNet',
                        time: '4 hours ago'
                    }
                ],

                analytics: {
                    avgViews: 89,
                    conversionRate: 3.2,
                    avgDaysListed: 42,
                    qualityScore: 8.7
                },

                marketComparisons: [
                    {
                        id: 1,
                        aircraft: 'Citation CJ3+',
                        yourPrice: 8500000,
                        marketAvg: 8200000,
                        position: 'High',
                        recommendation: 'Consider reducing by 3-5%'
                    }
                ],

                optimizationTips: [
                    {
                        id: 1,
                        type: 'info',
                        title: 'Add more photos',
                        description: 'Listings with 10+ photos get 40% more views'
                    },
                    {
                        id: 2,
                        type: 'warning',
                        title: 'Update maintenance records',
                        description: 'Fresh maintenance info increases inquiry rates'
                    }
                ],

                lookupQuery: '',
                lookupResult: null,
                pricingAircraft: '',
                pricingYear: '',
                pricingTime: '',
                pricingResult: null,

                toolUsage: [
                    { tool: 'Aircraft Lookup', count: 15 },
                    { tool: 'Pricing Calculator', count: 8 },
                    { tool: 'Photo Optimizer', count: 12 }
                ],

                proTips: [
                    {
                        id: 1,
                        title: 'Best photo angles',
                        description: 'Include exterior profile, cockpit, and cabin shots'
                    },
                    {
                        id: 2,
                        title: 'Pricing strategy',
                        description: 'Price within 5% of market average for faster sales'
                    }
                ],

                selectedIntegration: null,
                connectionForm: {
                    credentials: '',
                    secret: '',
                    serverUrl: ''
                },

                init() {
                    this.filteredListings = this.listings;
                },

                setActiveTab(tab) {
                    this.activeTab = tab;
                },

                filterListings() {
                    if (this.listingFilter === 'all') {
                        this.filteredListings = this.listings;
                    } else {
                        this.filteredListings = this.listings.filter(listing =>
                            listing.status === this.listingFilter
                        );
                    }
                },

                getStatusBadge(status) {
                    const badges = {
                        'active': 'bg-success',
                        'pending': 'bg-warning',
                        'expired': 'bg-danger',
                        'inactive': 'bg-secondary'
                    };
                    return badges[status] || 'bg-secondary';
                },

                getPositionBadge(position) {
                    const badges = {
                        'Low': 'bg-success',
                        'Market': 'bg-primary',
                        'High': 'bg-warning'
                    };
                    return badges[position] || 'bg-secondary';
                },

                connectIntegration(integration) {
                    this.selectedIntegration = integration;
                    new bootstrap.Modal(document.getElementById('connectModal')).show();
                },

                async submitIntegrationConnection() {
                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    this.selectedIntegration.connected = true;
                    this.selectedIntegration.stats = { listings: 0, synced: 0, lastSync: 'Just now' };
                    bootstrap.Modal.getInstance(document.getElementById('connectModal')).hide();
                    alert('Integration connected successfully!');
                },

                syncIntegration(integration) {
                    alert('Syncing with ' + integration.name + '...');
                    integration.stats.lastSync = 'Just now';
                },

                lookupAircraft() {
                    if (!this.lookupQuery) return;
                    // Simulate JetNet lookup
                    this.lookupResult = {
                        aircraft: 'Cessna Citation CJ3+ (N123AB)',
                        details: 'Year: 2018, Total Time: 1,245 hrs, Engines: 2x P&W PW530C'
                    };
                },

                calculatePricing() {
                    if (!this.pricingAircraft || !this.pricingYear) return;
                    // Simulate pricing calculation
                    this.pricingResult = 8250000 - (2024 - this.pricingYear) * 150000;
                },

                createNewListing() {
                    window.location.href = '/create-listing';
                },

                importFromAvinode() {
                    alert('Importing listings from Avinode...');
                },

                updateFromJetNet() {
                    alert('Updating aircraft data from JetNet...');
                },

                formatPrice(price) {
                    if (!price) return 'N/A';
                    return new Intl.NumberFormat('en-US', {
                        style: 'currency',
                        currency: 'USD',
                        minimumFractionDigits: 0
                    }).format(price);
                }
            }
        }
    </script>
</body>

</html>